{"ast":null,"code":"import io from 'socket.io-client';\nimport axios from 'axios';\nimport { mapState } from 'vuex';\nexport default {\n  name: \"EstoqueView\",\n  data() {\n    return {\n      produtos: []\n    };\n  },\n  methods: {\n    computed: {\n      ...mapState(['isActive'])\n    },\n    getImageUrl(base64String) {\n      return base64String ? `data:image/png;base64,${base64String}` : null;\n    },\n    async getProdutos() {\n      try {\n        const response = await axios.get('http://localhost:5000/get_produtos');\n        console.log('Data from server:', response.data);\n        response.data.sort((a, b) => a.indice - b.indice);\n        this.produtos = response.data;\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    },\n    async updateDatabase() {\n      try {\n        const randomPeso = Math.floor(Math.random() * 1000);\n        // Example data for the POST request\n        const postData = {\n          cod_barra: '78969954434',\n          peso: randomPeso.toString()\n        };\n\n        // Make a POST request to update the database\n        await axios.post('http://localhost:5000/update_database', postData);\n\n        // Fetch updated data after the database is updated\n        //await this.getProdutos();\n      } catch (error) {\n        console.error('Error updating database:', error);\n      }\n    }\n  },\n  mounted() {\n    this.getProdutos();\n    const socket = io('http://localhost:5000');\n    socket.on('database_updated', data => {\n      console.log('database_updated:', data);\n      this.getProdutos();\n    });\n  }\n};","map":{"version":3,"names":["io","axios","mapState","name","data","produtos","methods","computed","getImageUrl","base64String","getProdutos","response","get","console","log","sort","a","b","indice","error","updateDatabase","randomPeso","Math","floor","random","postData","cod_barra","peso","toString","post","mounted","socket","on"],"sources":["src/components/EstoqueView.vue"],"sourcesContent":["<template>\r\n    <div class=\"fundo\" :class=\"{ 'isActive': this.$store.state.isActive }\">\r\n        <div class=\"teste\" >\r\n            <ul class=\"listaItens\">\r\n                <li class=\"items\" v-for=\"produto in produtos\" :key=\"produto.indice\">\r\n                    <v class=\"row\">{{produto.nome}}</v>\r\n                    <v class=\"row\"><img class=\"imagens\" :src=\"getImageUrl(produto.image)\" alt=\"Product Image\" /></v>\r\n                    <v class=\"row\">{{ produto.litragem }}ml</v>\r\n                </li>\r\n            </ul>\r\n            <button @click=\"updateDatabase()\">Update Database</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport io from 'socket.io-client'\r\nimport axios from 'axios';\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n    name: \"EstoqueView\",\r\n    data(){\r\n        return{\r\n            produtos: [],\r\n        }\r\n    },\r\n    methods: {\r\n        computed: {\r\n            ...mapState(['isActive'])\r\n        },\r\n        getImageUrl(base64String) {\r\n            return base64String ? `data:image/png;base64,${base64String}` : null;\r\n        },\r\n        async getProdutos() {\r\n            try {\r\n                const response = await axios.get('http://localhost:5000/get_produtos');\r\n                console.log('Data from server:', response.data);    \r\n                response.data.sort((a, b) => a.indice - b.indice);    \r\n                this.produtos = response.data;\r\n            } catch (error) {\r\n                console.error('Error fetching data:', error);\r\n            }\r\n        },\r\n        async updateDatabase() {\r\n            try {\r\n                const randomPeso = Math.floor(Math.random() * 1000);\r\n                // Example data for the POST request\r\n                const postData = {\r\n                    cod_barra: '78969954434',\r\n                    peso: randomPeso.toString()\r\n                };\r\n\r\n                // Make a POST request to update the database\r\n                await axios.post('http://localhost:5000/update_database', postData);\r\n\r\n                // Fetch updated data after the database is updated\r\n                //await this.getProdutos();\r\n            } catch (error) {\r\n                console.error('Error updating database:', error);\r\n            }\r\n        },\r\n    },\r\n    mounted(){\r\n        this.getProdutos();\r\n        const socket = io('http://localhost:5000');\r\n        socket.on('database_updated',(data) =>{\r\n            console.log('database_updated:', data);\r\n            this.getProdutos();\r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.fundo{\r\n    background-color: #ffffff;\r\n    width: 100%;\r\n    height: 100%;\r\n    margin-left: auto;\r\n    border-radius: 20px;\r\n    margin-top: 10px;\r\n    margin-right: 0px;\r\n    height: auto;\r\n    transition: width 500ms ease;\r\n    &.isActive {\r\n        //width: calc(100% - 245px);\r\n        transition: width 500ms ease;\r\n    }\r\n}\r\n\r\n.items {\r\n    background-color: gray;\r\n    flex-grow:0;\r\n    margin: 20px 10px 0px;\r\n    border-radius: 20px;\r\n    list-style-type: none;\r\n    padding-top: 30px;\r\n    padding-left: 60px;\r\n}\r\n\r\n.listaItens {\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    justify-content: space-evenly;\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n}\r\n.imagens{\r\n    height: 250px;\r\n    width: 120px;\r\n    margin-left: 15px;\r\n    margin-right: 15px;\r\n    margin-bottom: 20px;\r\n}</style>"],"mappings":"AAgBA,OAAAA,EAAA;AACA,OAAAC,KAAA;AACA,SAAAC,QAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,QAAA;MACA,GAAAL,QAAA;IACA;IACAM,YAAAC,YAAA;MACA,OAAAA,YAAA,4BAAAA,YAAA;IACA;IACA,MAAAC,YAAA;MACA;QACA,MAAAC,QAAA,SAAAV,KAAA,CAAAW,GAAA;QACAC,OAAA,CAAAC,GAAA,sBAAAH,QAAA,CAAAP,IAAA;QACAO,QAAA,CAAAP,IAAA,CAAAW,IAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAD,CAAA,CAAAE,MAAA,GAAAD,CAAA,CAAAC,MAAA;QACA,KAAAb,QAAA,GAAAM,QAAA,CAAAP,IAAA;MACA,SAAAe,KAAA;QACAN,OAAA,CAAAM,KAAA,yBAAAA,KAAA;MACA;IACA;IACA,MAAAC,eAAA;MACA;QACA,MAAAC,UAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,MAAA;QACA;QACA,MAAAC,QAAA;UACAC,SAAA;UACAC,IAAA,EAAAN,UAAA,CAAAO,QAAA;QACA;;QAEA;QACA,MAAA3B,KAAA,CAAA4B,IAAA,0CAAAJ,QAAA;;QAEA;QACA;MACA,SAAAN,KAAA;QACAN,OAAA,CAAAM,KAAA,6BAAAA,KAAA;MACA;IACA;EACA;EACAW,QAAA;IACA,KAAApB,WAAA;IACA,MAAAqB,MAAA,GAAA/B,EAAA;IACA+B,MAAA,CAAAC,EAAA,qBAAA5B,IAAA;MACAS,OAAA,CAAAC,GAAA,sBAAAV,IAAA;MACA,KAAAM,WAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}